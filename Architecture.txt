Aşağıdaki diyagram + zaman-sıralı liste, tek bir git push’tan başlayarak modelin eğitilmesinden → Kaggle verisinin DVC ile çekilmesinden → Docker imajının oluşmasına kadar gerçekte neyin ne zaman çalıştığını gösteriyor.

┌-------------┐
│  Developer  │  git push origin main
└-----┬-------┘
      │  (1) Trigger → GitHub Actions
      ▼
┌-------------------------------┐
│  GitHub Runner (ubuntu-latest)│
│  .github/workflows/train-eval-deploy.yml
└----┬------------------------┬--┘
     │                        │
     │a) Checkout repo        │b) secrets (HF_TOKEN, WANDB_API_KEY, KAGGLE_USERNAME, KAGGLE_KEY)
     ▼                        ▼
┌----------------------------------------------------------┐
│  Stage-A:  Kaggle Notebook Push & Trigger                │
│  - python kaggle/push_notebook.py                        │
│  - Notebook = kaggle/notebook.ipynb                      │
└------------------------┬---------------------------------┘
                         │
                         ▼
          ┌-----------------------------┐
          │  Kaggle GPU (P100/V100/T4)  │   ← NEW
          │  - DVC pull (data)          │
          │  - pip install repo         │
          │  - src/train.py             │
          │  - HF Hub push              │
          └--------┬--------------------┘
                   │
                   ▼
┌----------------------------------------------------------┐
│  GitHub Runner (devam)                                   │
│  - Poll status → “complete” bekler                       │
└------------------------┬---------------------------------┘
                         │
                         ▼
┌----------------------------------------------------------┐
│  Stage-B:  python src/evaluate.py                         │
│  - Test seti (50 örnek)                                  │
│  - BLEU + ROUGE → metrics.json                           │
│  - Artifact: metrics.json (upload-artifact)              │
└------------------------┬---------------------------------┘
                         │
                         ▼
┌----------------------------------------------------------┐
│  Stage-C:  docker build -t nizami-1.7b:latest .          │
│  - Dockerfile → vLLM + FastAPI                           │
│  - Image GitHub Actions cache’e pushlanır                │
└------------------------┬---------------------------------┘
                         │
                         ▼
┌----------------------------------------------------------┐
│  Sonuç:                                                  │
│  - Eğitim Kaggle GPU’da yapıldı                        │
│  - Model HF Hub’da versiyonlu                          │
│  - Metrikler W&B’de                                     │
│  - Docker imajı hazır                                   │
│  - Production → `docker run -p 8000:8000 nizami-1.7b`   │
└----------------------------------------------------------┘
